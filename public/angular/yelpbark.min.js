(function(){angular.module("yelpbarkApp",["ngRoute","ngSanitize","ui.bootstrap"]);function e(e,t){e.when("/",{templateUrl:"/home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/about",{templateUrl:"/common/views/genericText.view.html",controller:"aboutCtrl",controllerAs:"vm"}).when("/location/:locationid",{templateUrl:"/locationDetail/locationDetail.view.html",controller:"locationDetailCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"});t.html5Mode(true)}angular.module("yelpbarkApp").config(["$routeProvider","$locationProvider",e])})();(function(){angular.module("yelpbarkApp").controller("homeCtrl",e);e.$inject=["$scope","yelpbarkData","geolocation"];function e(e,t,o){var n=this;n.pageHeader={title:"YelpBark",strapline:"Find great places to bring your four legged friends!"};n.sidebar={content:"looking for a great place to bring your four legged friend? We have found it for you!"};n.message="Checking your location";n.getData=function(e){var o=e.coords.latitude,a=e.coords.longitude;n.message="Searching for nearby places";t.locationByCoords(o,a).success(function(e){n.message=e.length>0?"":"No locations found nearby";n.data={locations:e}}).error(function(e){n.message="Sorry, something's gone wrong, please try again later"})};n.showError=function(t){e.$apply(function(){n.message=t.message})};n.noGeo=function(){e.$apply(function(){n.message="Geolocation is not supported by this browser."})};o.getPosition(n.getData,n.showError,n.noGeo)}})();(function(){angular.module("yelpbarkApp").controller("aboutCtrl",e);function e(){var e=this;e.pageHeader={title:"About yelpbark"};e.main={content:"YelpBark was created to help people find the best places to bring their four legged friends. Looking to have a beer while taking your dog out? Just type beer and you will see all the dog friendly beer locations. \n\nAlso, leave reviews to help people know what they can experience when they visit locations all around them!"}}})();(function(){angular.module("yelpbarkApp").controller("locationDetailCtrl",e);e.$inject=["$routeParams","$modal","yelpbarkData"];function e(e,t,o){var n=this;n.locationid=e.locationid;o.locationById(n.locationid).success(function(e){n.data={location:e};n.pageHeader={title:n.data.location.name}}).error(function(e){console.log(e)});n.popupReviewForm=function(){var e=t.open({templateUrl:"/reviewModal/reviewModal.view.html",controller:"reviewModalCtrl as vm",resolve:{locationData:function(){return{locationid:n.locationid,locationName:n.data.location.name}}}});e.result.then(function(e){n.data.location.reviews.push(e)})}}})();(function(){angular.module("yelpbarkApp").controller("reviewModalCtrl",e);e.$inject=["$modalInstance","yelpbarkData","locationData"];function e(e,t,o){var n=this;n.locationData=o;n.onSubmit=function(){n.formError="";if(!n.formData.name||!n.formData.rating||!n.formData.reviewText){n.formError="All fields required, please try again";return false}else{n.doAddReview(n.locationData.locationid,n.formData)}};n.doAddReview=function(e,o){t.addReviewById(e,{author:o.name,rating:o.rating,reviewText:o.reviewText}).success(function(e){n.modal.close(e)}).error(function(e){n.formError="Your review has not been saved, please try again"});return false};n.modal={close:function(t){e.close(t)},cancel:function(){e.dismiss("cancel")}}}})();(function(){angular.module("yelpbarkApp").service("geolocation",e);function e(){var e=function(e,t,o){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(e,t)}else{o()}};return{getPosition:e}}})();(function(){angular.module("yelpbarkApp").service("yelpbarkData",e);e.$inject=["$http"];function e(e){var t=function(t,o){return e.get("/api/locations?lng="+o+"&lat="+t+"&maxDistance=2000000000000000000000000000000000000000000000000000000000000000000000000000")};var o=function(t){return e.get("/api/locations/"+t)};var n=function(t,o){return e.post("/api/locations/"+t+"/reviews",o)};return{locationByCoords:t,locationById:o,addReviewById:n}}})();(function(){angular.module("yelpbarkApp").filter("formatDistance",t);var e=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};function t(){return function(t){var o,n;if(t&&e(t)){if(t>1){o=parseFloat(t/1e3).toFixed(1);n="km"}else{o=parseInt(t*1e3,10);n="m"}return o+n}else{return"?"}}}})();(function(){angular.module("yelpbarkApp").filter("addHtmlLineBreaks",e);function e(){return function(e){var t=e.replace(/\n/g,"<br/>");return t}}})();(function(){angular.module("yelpbarkApp").directive("navigation",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html"}}})();(function(){angular.module("yelpbarkApp").directive("footerGeneric",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/footerGeneric/footerGeneric.template.html"}}})();(function(){angular.module("yelpbarkApp").directive("pageHeader",e);function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/pageHeader/pageHeader.template.html"}}})();(function(){angular.module("yelpbarkApp").directive("ratingStars",e);function e(){return{restrict:"EA",scope:{thisRating:"=rating"},templateUrl:"/common/directives/ratingStars/ratingStars.template.html"}}})();